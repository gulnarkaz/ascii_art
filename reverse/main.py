import sys
import os
standard_dict = {
        ' ': [
            "       ",
            "       ",
            "       ",
            "       ",
            "       ",
            "       ",
            "       ",
            "       "
            ],
        '!': [
            "       ", 
            "   _   ",
            "  | |  ",
            "  | |  ",
            "  | |  ", 
            "  | |  ", 
            "  (_)  ",
            "       ",
            "       "
            ],
        '"': [
            "  _ _  ", 
            " ( | ) ",
            "  V V  ",
            "       ",
            "       ",
            "       ",
            "       ",
            "       "
            ],
        '#': [
            
            "   _  _   ", 
            " _| || |_ ",
            "|_  __  _|", 
            " _| || |_ ", 
            "|_  __  _|", 
            "  |_||_|  ",
            "          ",
            "          " 
           
        ],
        '$': [
            "  _   ", 
            " | |  ",
            "/ __) ", 
           r"\__ \ ", 
            "(   / ", 
            " |_|  ", 
            "      ", 
            "      "                
        ],
            
        '%': [
            " _   __ ",
            "(_) / / ",
            "   / /  ",
            "  / /   ",
            " / / _  ",
            "/_/ (_) ",
            "        ",
            "        "                        
        ],
        '&': [
            "         ", 
            "  ___    ", 
            " ( _ )   ", 
           r" / _ \/\ ", 
            "| (_>  < ", 
           r" \___/\/ ", 
            "         ", 
            "         "
        ],
        
        "'": [    
            " _  ",
            "( ) ",
            "|/  ",
            "    ",
            "    ",
            "    ",
            "    ",
            "    "
            ],
            
        '(': [
            "  __ ",
            " / / ",
            "| |  ",
            "| |  ",
            "| |  ",
            "| |  ",
           r" \_\ ",
            "     "
            ],

        ')': [
            "__   ",
           r"\ \  ",
            " | | ",
            " | | ",
            " | | ",
            " | | ",
            "/_/  ",
            "     "
            ],
        'A': [
            "           ", 
           r"    /\     ", 
           r"   /  \    ", 
           r"  / /\ \   ", 
           r" / ____ \  ", 
           r"/_/    \_\ ", 
            "           ", 
            "           " 
        ],
        'B': [
            " ____  ", 
           r"|  _ \ ", 
            "| |_) |", 
            "|  _ < ", 
            "| |_) |", 
            "|____/ ", 
            "       ", 
            "       "
            ],
            
        'C': [
            "  _____ ", 
            " / ____|", 
            "| |     ", 
            "| |     ", 
            "| |____ ", 
           r" \_____|", 
            "        ", 
            "        " 
            ],
        
        'D': [
            " _____  ",
           r"|  __ \ ", 
            "| |  | |", 
            "| |  | |", 
            "| |__| |", 
            "|_____/ ", 
            "        ", 
            "        "
            ],
        'E': [

            " ______ ", 
            "|  ____|", 
            "| |__   ", 
            "|  __|  ", 
            "| |____ ", 
            "|______|", 
            "        ", 
            "        " 
            ],
        'F': [
            " ______ ", 
            "|  ____|", 
            "| |__   ", 
            "|  __|  ", 
            "| |     ", 
            "|_|     ", 
            "        ", 
            "        "
            ], 
        'G': [

            "  _____ ",
            " / ____|", 
            "| |  __ ", 
            "| | |_ |", 
            "| |__| |", 
           r" \_____|", 
            "        ", 
            "        " 
            ],
            
        'H': [
            " _    _ ", 
            "| |  | |", 
            "| |__| |", 
            "|  __  |", 
            "| |  | |", 
            "|_|  |_|", 
            "        ", 
            "        " 
            ],
        
        'I': [
            " _____  ",
            "|_   _| ",
            "  | |   ",
            "  | |   ",
            " _| |_  ",
            "|_____| ",
            "        ",
            "        "

            ],
        'J': [
            "      _  ", 
            "     | | ",
            "     | | ",
            " _   | | ",
            "| |__| | ",
           r" \____/  ",
            "         ",
            "         "  
            ],         
                    
        'K': [
            " _  __ ",
            "| |/ / ",
            "| ' /  ",
            "|  <   ",
           r"| . \  ",
           r"|_|\_\ ",
            "       ",
            "       "
            ],       
        'L': [

            " _      ", 
            "| |     ", 
            "| |     ", 
            "| |     ", 
            "| |____ ", 
            "|______|", 
            "        ", 
            "        " 
            ],

        'M': [
            " __  __ ", 
           r"|  \/  |", 
           r"| \  / |", 
           r"| |\/| |", 
            "| |  | |", 
            "|_|  |_|", 
            "        ", 
            "        " 
            ],

        'N': [
            " _   _  ",
           r"| \ | | ",
           r"|  \| | ",
            "| . ` | ",
           r"| |\  | ",
           r"|_| \_| ",
            "        ",
            "        "
            ],        
        'O': [
            "  ____  ",  
           r" / __ \ ", 
            "| |  | |", 
            "| |  | |", 
            "| |__| |", 
           r" \____/ ", 
            "        ", 
            "        " 
            ],
        'P': [ 
            "        ",
            " _____  ", 
           r"|  __ \ ", 
            "| |__) |", 
            "|  ___/ ", 
            "| |     ", 
            "|_|     ", 
            "        " 

            ],         

        'Q': [
            "         ",
            "  ____   ",
           r" / __ \  ", 
            "| |  | | ",
            "| |  | | ",
            "| |__| | ",
           r" \___\_\ ",
            "         "
            ],         
         
        'R': [
            " _____   ", 
           r"|  __ \  ", 
            "| |__) | ", 
            "|  _  /  ", 
           r"| | \ \  ", 
           r"|_|  \_\ ", 
            "         ", 
            "         " 
            ],

        'S': [
            "  _____  ",
            " / ____| ",
            "| (___   ",
           r" \___ \  ",
            " ____) | ",
            "|_____/  ",
            "         ",
            "         "
            ],

        'T': [
            " _______  ",
            "|__   __| ",
            "   | |    ",
            "   | |    ",
            "   | |    ",
            "   |_|    ",
            "          ",
            "          "
            ],

        'U': [
            " _    _  ",
            "| |  | | ",
            "| |  | | ",
            "| |  | | ",
            "| |__| | ",
           r" \____/  ",
            "         ",
            "         "
            ],

        'V': [
            "__      __ ",
           r"\ \    / / ",
           r" \ \  / /  ",
           r"  \ \/ /   ",
           r"   \  /    ",
           r"    \/     ",
            "           ",
            "           "
            ], 
           
        'W': [
           r"__          __", 
           r"\ \        / /", 
           r" \ \  /\  / / ", 
           r"  \ \/  \/ /  ", 
           r"   \  /\  /   ", 
           r"    \/  \/    ", 
           r"              ", 
           r"              " 
            ],
        'X': [
            "__   __ ",
            r"\ \ / / ",
            r" \ V /  ",
            "  > <   ",
            r" / . \  ",
            r"/_/ \_\ ",
            "        ",
            "        "
            ],
                    
        'Y': [
            "__     __ ",
            r"\ \   / / ",
            r" \ \_/ /  ",
            r"  \   /   ",
            "   | |    ",
            "   |_|    ",
            "          ",
            "          "
            ],
                    
        'Z': [
            " ______ ",
            r"|___  / ",
            r"   / /  ",
            r"  / /   ",
            r" / /__  ",
            r"/_____| ",
            "        ",
            "        "
            ],
                    
        '[': [
            " ___  ",
            "|  _| ",
            "| |   ",
            "| |   ",
            "| |   ",
            "| |_  ",
            "|___| ",
            "      "
            ],
                
        r" \ ": [
            "__      ",
            r"\ \     ",
            r" \ \    ",
            r"  \ \   ",
            r"   \ \  ",
            r"    \_\ ",
            "        ",
            "        ",
            ],
                    
        ']': [
            " ___  ",
            "|_  | ",
            "  | | ",
            "  | | ",
            "  | | ",
            " _| | ",
            "|___| ",
            "      ",
            ],
                
        '^': [
            r" /\  ",
            r"|/\| ",
            "     ",
            "     ",
            "     ",
            "     ",
            "     ",
            "     ",
            ],     

        '_': [
            "         ",
            "         ",
            "         ",
            "         ",
            "         ",
            "         ",
            " ______  ",
            "|______| ",
            ],

        '`': [
            " _  ",
            "( ) ",
           r" \| ",
            "    ",
            "    ",
            "    ",
            "    ",
            "    ",
            ],
            
        'a': [
            "       ", 
            "       ", 
            "  __ _ ",
            " / _` |", 
            "| (_| |", 
           r" \__,_|", 
            "       ", 
            "       "
            ],
        'b': [
            " _     ", 
            "| |    ", 
            "| |__  ", 
           r"| '_ \ ", 
            "| |_) |", 
            "|_.__/ ", 
            "       ", 
            "       " 
            ],
        'c': [
            "      ", 
            "      ", 
            "  ___ ", 
            " / __|", 
            "| (__ ", 
           r" \___|", 
            "      ", 
            "      " 
            ],
            
        'd': [
            "     _ ", 
            "    | |", 
            "  __| |", 
            " / _` |", 
            "| (_| |", 
           r" \__,_|", 
            "       ", 
            "       "
            ],

        'e': [
            "      ", 
            "      ", 
            "  ___ ", 
           r" / _ \ ", 
            "|  __/", 
           r" \___|", 
            "      ", 
            "      " 
            ],
        'f': [
            "  __   ",
            " / _| ",
            " / _| ",
            "| |_  ",
            "|  _| ",
            "| |   ",
            "|_|   ",
            "      ",
            "      "
            ],

        'g': [        
            "        ",
            "  __ _  ",
            " / _` | ",
            "| (_| | ",
           r" \__, | ",
            "  __/ | ",
            " |___/  ",
            "        "
            ],

        'h': [
            " _     ", 
            "| |    ", 
            "| |__  ", 
           r"|  _ \ ", 
            "| | | |", 
            "|_| |_|", 
            "       ", 
            "       " 
            ],
        'i': [
            " _  ",
            "(_) ",
            " _  ",
            "| | ",
            "| | ",
            "|_| ",
            "    ",
            "    "
            ],
                
        'j': [
            "   _  ",
            "  (_) ",
            "   _  ",
            "  | | ",
            "  | | ",
            "  | | ",
            " _/ | ",
            "|__/  "
            ],

        'k': [
            "       ",
            " _     ",
            "| | _  ",
            "| |/ / ",
            "|   <  ",
           r"|_|\_\ ",
            "       ",
            "       "
            ],
        
        'l': [
            " _ ", 
            "| |", 
            "| |", 
            "| |", 
            "| |", 
            "|_|", 
            "   ", 
            "   "
            ],
        'm': [
            "              ",            
            "              ",
            " _ __ ___     ",
           r"| '_ ` _ \    ",
            "| | | | | |   ",
            "|_| |_| |_|   ",
            "              ",
            "              "
            ],
        'n': [
            "        ",
            "        ",
            " _ __   ",
           r"| '_ \  ",
            "| | | | ",
            "|_| |_| ",
            "        ",
            "        "
            ],
        
        'o': [
            "       ", 
            "       ", 
            "  ___  ", 
           r" / _ \ ", 
            "| (_) |", 
           r" \___/ ", 
            "       ", 
            "       " 
            ],

        'p': [       
            "        ",
            "        ", 
            "  _ __  ", 
           r"| '_ \  ",
            "| |_) | ",
            "| .__/  ",
            "| |     ",
            "|_|     "

            ],

        'q': [        
            "        ",
            "        ",
            "  __ _  ",
            " / _` | ",
            "| (_| | ",
           r" \__, | ",
            "    | | ",
            "    |_| "

            ],
        'r': [
             
            "      ", 
            " _ __ ", 
            " _ __ ", 
            "| '__|", 
            "| |   ", 
            "|_|   ", 
            "      ",
            "      ", 
            "      " 
            ],

        's': [
            "      ",
            "      ",
            " ___  ",
            "/ __| ",
           r"\__ \ ",
            "|___/ ",
            "      ",
            "      "
            ],

        't': [
            " _    ",
            "| |   ",
            "| |_  ",
            "| __| ",
            r"\ |_  ",
            r" \__| ",
            "      ",
            "      "
            ],

        'u': [
            "        ",
            "        ",
            " _   _  ",
            "| | | | ",
            "| |_| | ",
            r" \__,_| ",
            "        ",
            "        "
            ],

        'v': [        
            "        ",
            "        ",
            "__   __ ",
            r"\ \ / / ",
            r" \ V /  ",
            r"  \_/   ",
            "        ",
            "        "
            ],      
          
        'w': [
            "          ", 
            "          ", 
            "__      __", 
           r"\ \ /\ / /", 
           r" \ V  V / ", 
           r"  \_/\_/  ", 
            "          ", 
            "          " 
            ],
        'x': [
            "      ", 
            "      ", 
            "__  __", 
           r"\ \/ /", 
            " >  < ", 
           r"/_/\_\ ", 
            "      ", 
            "      " 
            ],
        'y': [        
            "        ",
            "        ",
            " _   _  ",
            "| | | | ",
            "| |_| | ",
            r" \__, | ",
            " __/ /  ",
            "|___/   "

            ],

        'z': [

            "      ",
            "      ",
            " ____ ",
            "|_  / ",
            " / /  ",
            "/___| ",
            "      ",
            "      "
            ],
        '{': [
            "   __ ",
            "  / / ",
            " | |  ",
            "/ /   ",
            r"\ \   ",
            " | |  ",
            r"  \_\ ",
            "      "
                
            ],
        '|': [

            " _  ",
            "| | ",
            "| | ",
            "| | ",
            "| | ",
            "| | ",
            "| | ",
            "|_| "
            ],

        '}': [
                
            "__    ",
           r"\ \   ",
            " | |  ",
           r"  \ \ ",
            "  / / ",
            " | |  ",
            "/_/   ",
            "      "
            ],

        '~': [

           r" /\/|  ",
           r"|/\/   ",
            "       ",
            "       ",
            "       ",
            "       ",
            "       ",
            "       "

            ],
        }

def ascii_art_to_text(file_name):
    with open(file_name, 'r') as file:
        lines = file.read().splitlines()

    output_string = [] 

    width = 8
    height = len(lines)
    
    max_length = max(len(line) for line in lines)
    if any(len(line) != max_length for line in lines):
        print("Ошибка: строки в ASCII-арте имеют разную длину.")
        return ''
    
    i = 0
    while i < max_length:
        block_lines = [line[i:i+width] for line in lines]
        symbol = '?'
        for char, art in standard_dict.items():
            if block_lines == art:
                symbol = char
                break
        output_string.append(symbol)
        i += width
    return ''.join(output_string)

def handle_args():
    if len(sys.argv) < 2:
        print("Usage: python main.py --reverse=<fileName>")
        sys.exit(1)
    file_name = None
    for arg in sys.argv:
        if arg.startswith("--reverse="):
            file_name = arg[len("--reverse="):]
    if not file_name:
        print("Usage: python main.py --reverse=<fileName>")
        sys.exit(1)

    return file_name

def main():
    file_name = handle_args() 
    result = ascii_art_to_text(file_name)
    print(f"{result}")
    
if __name__ == "__main__":
    main()